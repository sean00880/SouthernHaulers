# ==========================================
# SOUTHERN HAULERS TMS - Environment Configuration
# Part of: GROWSZ Biosphere
# ==========================================
# Last Updated: 2025-10-22
# Ecosystem: Southern Haulers (Drayage TMS & Logistics)
#
# Setup Instructions:
# 1. Copy this file to .env.local
# 2. Fill in your actual API keys and credentials
# 3. Never commit .env.local to version control
# ==========================================

# ==========================================
# AI AGENT ORCHESTRATION (Multi-Agent System)
# ==========================================
# Required for multi-agent orchestration across Claude Code, KILO, Codex, Gemini CLI
# Get your keys from:
# - OpenAI: https://platform.openai.com/api-keys
# - Anthropic: https://console.anthropic.com/settings/keys
# - Google: https://makersuite.google.com/app/apikey
# - Perplexity: https://www.perplexity.ai/settings/api

# OpenAI API (GPT-5, GPT-4o, O3 for Math/Code Agents)
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API (Claude Sonnet 4.5 for Orchestration & Reasoning)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google AI API (Gemini 2.5 Pro for Analytics & Computer Use validation)
GOOGLE_GENERATIVE_AI_API_KEY=your_google_ai_api_key_here

# Perplexity API (Research & Documentation lookup via MCP)
PERPLEXITY_API_KEY=your_perplexity_api_key_here

# Agent Moon Configuration (Shared with MEMELinked ecosystem)
ENABLE_AUTH_BYPASS=false  # Set to true ONLY in development for testing
AGENT_MOON_ENABLED=true

# ==========================================
# AUTHENTICATION & AUTHORIZATION
# ==========================================
# Phase 1: Supabase (Simple auth for MVP)
# Phase 2: WorkOS (Enterprise SSO, SCIM, Multi-IdP)

# Current Auth Provider
NEXT_PUBLIC_AUTH_PROVIDER=workos  # workos for enterprise, supabase for dev

# WorkOS (Enterprise Auth - Recommended for TMS)
WORKOS_API_KEY=your_workos_api_key_here
WORKOS_CLIENT_ID=your_workos_client_id_here
NEXT_PUBLIC_WORKOS_CLIENT_ID=your_workos_client_id_here
WORKOS_REDIRECT_URI=http://localhost:3000/api/auth/callback
WORKOS_COOKIE_PASSWORD=your-32-char-cookie-password-here-minimum-length
WORKOS_COOKIE_DOMAIN=localhost

# Supabase (Fallback/Development Auth)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# ==========================================
# DATABASE CONFIGURATION
# ==========================================

# Supabase Postgres (Primary Database)
DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres
DIRECT_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# PostgreSQL Connection Pool
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_CONNECTIONS=20

# PostGIS Configuration (for gates/geofences)
POSTGIS_ENABLED=true

# pgvector Configuration (for AI/RAG features)
PGVECTOR_ENABLED=true

# ==========================================
# REDIS CONFIGURATION (Queue & Cache)
# ==========================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_here
REDIS_MAX_CLIENTS=50

# ==========================================
# PORTPRO INTEGRATION (Drayage TMS)
# ==========================================
# Feature-flagged integration with PortPro as system of record
# Research exact values via Perplexity MCP per /docs/PortPro-Integration.md

# PortPro API Configuration
PORTPRO_API_KEY=your_portpro_api_key_here
PORTPRO_API_URL=https://api.portpro.io/v2
PORTPRO_WEBHOOK_SECRET=your_portpro_webhook_secret_here
PORTPRO_CLIENT_ID=your_portpro_client_id_here
PORTPRO_CLIENT_SECRET=your_portpro_client_secret_here

# PortPro Token Management
PORTPRO_ACCESS_TOKEN_TTL=86400  # ~24h (verify with research)
PORTPRO_REFRESH_TOKEN_TTL=8640000  # ~100d (verify with research)

# PortPro Feature Flags
PORTPRO_ENABLED=false  # Enable PortPro integration
PORTPRO_WEBHOOK_ENABLED=false
PORTPRO_SYNC_ENABLED=false
PORTPRO_AUTHORITY_MODE=external  # external or internal

# ==========================================
# EDI INTEGRATION (X12 for Brokers)
# ==========================================
EDI_ENABLED=false
EDI_SENDER_ID=your_edi_sender_id_here
EDI_RECEIVER_ID=your_edi_receiver_id_here
EDI_SUPPORTED_TYPES=204,214,210,990

# ==========================================
# AGENTIC OPERATIONS
# ==========================================
# AI-powered agents for appointment booking, exceptions, compliance

# Appointment Agent
AGENTS_APPOINTMENT_ENABLED=false
APPOINTMENT_AGENT_AUTO_APPROVE=false

# Exception Agent (TMF/Demurrage Risk)
AGENTS_EXCEPTION_ENABLED=false
EXCEPTION_AGENT_THRESHOLD_USD=100

# Compliance Agent (TWIC, Clearinghouse, Truth-in-Leasing)
AGENTS_COMPLIANCE_ENABLED=false
COMPLIANCE_AGENT_AUTO_REMIND=true

# Pricing Agent (CPQ/Rate Management)
AGENTS_PRICING_ENABLED=false

# ==========================================
# OBSERVABILITY & MONITORING
# ==========================================

# OpenTelemetry Configuration
OTEL_ENABLED=true
OTEL_SERVICE_NAME=southern-haulers-tms
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_TRACES_SAMPLER=parentbased_always_on

# Sentry Error Tracking
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn_here
SENTRY_ORG=your-org-slug
SENTRY_PROJECT=southernhaulers
SENTRY_AUTH_TOKEN=your_sentry_auth_token_here
SENTRY_DISABLE_SERVER_WEBPACK_PLUGIN=false
SENTRY_HIDE_SOURCE_MAPS=true

# ==========================================
# STRIPE PAYMENTS & BILLING
# ==========================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Price IDs for Subscription Plans
NEXT_PUBLIC_STRIPE_PRICE_BASIC_MONTHLY=price_basic_monthly_id
NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY=price_pro_monthly_id
NEXT_PUBLIC_STRIPE_PRICE_ENTERPRISE_MONTHLY=price_enterprise_monthly_id

# ==========================================
# AWS SERVICES (S3, MediaConvert, CloudFront)
# ==========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here

# S3 Buckets for Document Storage (POD, BOL, COI, W-9)
AWS_S3_DOCUMENTS_BUCKET=southernhaulers-documents
AWS_S3_DOCUMENTS_REGION=us-east-1

# CloudFront for Document Delivery
AWS_CLOUDFRONT_DOMAIN=https://your-cloudfront-domain.cloudfront.net
CLOUDFRONT_DISTRIBUTION_ID=your_distribution_id_here
CLOUDFRONT_KEY_PAIR_ID=your_keypair_id_here

# ==========================================
# TWILIO (SMS for A2P 10DLC Recruiting)
# ==========================================
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_MESSAGING_SERVICE_SID=your_messaging_service_sid_here

# A2P 10DLC Configuration
TWILIO_A2P_CAMPAIGN_ID=your_campaign_id_here
TWILIO_A2P_ENABLED=false

# ==========================================
# COMPLIANCE & REGULATORY
# ==========================================

# FMCSA Clearinghouse API
FMCSA_API_KEY=your_fmcsa_api_key_here
FMCSA_API_URL=https://clearinghouse.fmcsa.dot.gov/api/v1

# TWIC Verification
TWIC_VERIFICATION_ENABLED=true
TWIC_API_KEY=your_twic_api_key_here

# Truth-in-Leasing (49 CFR Part 376)
TRUTH_IN_LEASING_ENABLED=true
LEASE_AGREEMENT_RETENTION_YEARS=3

# HOS/ELD Integration (Read-Only)
ELD_PROVIDER=your_eld_provider_here  # e.g., "samsara", "geotab", "keeptruckin"
ELD_API_KEY=your_eld_api_key_here
ELD_API_URL=https://api.your-eld-provider.com
HOS_READ_ONLY=true  # Never automate HOS violations

# ==========================================
# PROGRAMMATIC SEO
# ==========================================
# State/City landing pages with LocalBusiness JSON-LD

# Site Configuration
NEXT_PUBLIC_SITE_URL=https://southernhaulers.net
NEXT_PUBLIC_APP_NAME=Southern Haulers
NEXT_PUBLIC_COMPANY_PHONE=+1-800-HAULERS
NEXT_PUBLIC_COMPANY_EMAIL=dispatch@southernhaulers.net

# SEO Configuration
NEXT_PUBLIC_SEO_ENABLED=true
NEXT_PUBLIC_PROGRAMMATIC_SEO_ENABLED=true
NEXT_PUBLIC_SITEMAP_SPLIT_ENABLED=true
NEXT_PUBLIC_OG_IMAGE_DYNAMIC=true

# LocalBusiness Schema Configuration
NEXT_PUBLIC_BUSINESS_TYPE=MovingCompany
NEXT_PUBLIC_SERVICE_AREA=US-GA,US-SC,US-NC,US-FL,US-TN,US-AL

# ==========================================
# QUOTE CRM / CPQ SYSTEM
# ==========================================
CPQ_ENABLED=true
CPQ_AUTO_PRICING_ENABLED=false
CPQ_APPROVAL_WORKFLOW_ENABLED=true

# Accessorial Pricing
TMF_FEE_ENABLED=true
DEMURRAGE_FEE_ENABLED=true
PER_DIEM_FEE_ENABLED=true

# ==========================================
# RECRUITING ENGINE (AI-Powered)
# ==========================================
RECRUITING_ENABLED=false
RECRUITING_META_LEAD_ADS_ENABLED=false

# Meta Lead Ads Configuration
META_ACCESS_TOKEN=your_meta_access_token_here
META_APP_ID=your_meta_app_id_here
META_APP_SECRET=your_meta_app_secret_here
META_LEAD_FORM_ID=your_lead_form_id_here

# ==========================================
# NEXTAUTH CONFIGURATION
# ==========================================
NEXTAUTH_SECRET=your-nextauth-secret-key-here-should-be-at-least-32-characters-long
NEXTAUTH_URL=http://localhost:3000

# ==========================================
# APPLICATION CONFIGURATION
# ==========================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Performance Configuration
NODE_OPTIONS=--max-old-space-size=4096
NEXT_PUBLIC_PERFORMANCE_TARGET_MS=250  # API latency p95 target

# Feature Flags
NEXT_PUBLIC_ENABLE_DARK_MODE=true
NEXT_PUBLIC_ENABLE_OFFLINE_MODE=true  # For driver PWA
NEXT_PUBLIC_ENABLE_NOTIFICATIONS=true

# Web Core Vitals Targets
NEXT_PUBLIC_LCP_TARGET=2500  # 2.5s
NEXT_PUBLIC_CLS_TARGET=0.1
NEXT_PUBLIC_INP_TARGET=200  # 200ms

# ==========================================
# RATE LIMITING & SECURITY
# ==========================================
API_RATE_LIMIT=100
API_RATE_WINDOW=60
CSRF_PROTECTION=true
RATE_LIMITING=true

# ==========================================
# CLOUDINARY (Media Storage - Optional)
# ==========================================
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloud_name_here
NEXT_PUBLIC_CLOUDINARY_API_KEY=your_api_key_here
CLOUDINARY_API_SECRET=your_api_secret_here

# ==========================================
# GOOGLE MAPS (Routing & Geolocation)
# ==========================================
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# ==========================================
# TERMINAL APPOINTMENT SYSTEMS
# ==========================================
# eModal and alternative terminal systems

EMODAL_ENABLED=false
EMODAL_API_KEY=your_emodal_api_key_here
EMODAL_API_URL=https://api.emodal.com

# TMF/PierPass Configuration
TMF_ENABLED=true
PIERPASS_ENABLED=true

# ==========================================
# WEBHOOK CONFIGURATION
# ==========================================
WEBHOOK_ACK_TIMEOUT_MS=200
WEBHOOK_RETRY_STRATEGY=exponential
WEBHOOK_MAX_RETRIES=3
WEBHOOK_DLQ_ENABLED=true

# ==========================================
# QUALITY GATES & SLOs
# ==========================================
# Performance targets per quality_bars in CLAUDE.md

API_LATENCY_P95_TARGET_MS=250
API_ERROR_BUDGET_30D=99.9
WEBHOOK_SUCCESS_RATE_TARGET=99.5
LCP_TARGET_MS=2500
CLS_TARGET=0.1
INP_TARGET_MS=200

# ==========================================
# MCP SERVER CONFIGURATION
# ==========================================
# These are set in ~/.claude.json but can be referenced here

# Taskmaster MCP (uses Perplexity internally)
# PERPLEXITY_API_KEY=pplx-... (already set above)

# Redis MCP
# REDIS_URL=redis://localhost:6379 (already set above)

# ==========================================
# END OF SOUTHERN HAULERS CONFIGURATION
# ==========================================
